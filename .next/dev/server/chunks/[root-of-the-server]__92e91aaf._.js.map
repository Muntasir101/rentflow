{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/db.ts"],"sourcesContent":["import { PrismaClient } from '@prisma/client';\r\n\r\nconst globalForPrisma = global as unknown as { prisma: PrismaClient };\r\n\r\nexport const prisma =\r\n    globalForPrisma.prisma ||\r\n    new PrismaClient({\r\n        log: process.env.NODE_ENV === 'development' ? ['query'] : [],\r\n    });\r\n\r\nif (process.env.NODE_ENV !== 'production') globalForPrisma.prisma = prisma;\r\n"],"names":[],"mappings":";;;;AAAA;;AAEA,MAAM;AAEC,MAAM,SACT,gBAAgB,MAAM,IACtB,IAAI,6IAAY,CAAC;IACb,KAAK,uCAAyC;QAAC;KAAQ,GAAG;AAC9D;AAEJ,wCAA2C,gBAAgB,MAAM,GAAG"}},
    {"offset": {"line": 75, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/auth.ts"],"sourcesContent":["import { SignJWT, jwtVerify } from 'jose';\r\nimport { cookies } from 'next/headers';\r\nimport { NextRequest, NextResponse } from 'next/server';\r\n\r\n// Get JWT secret from environment variable (lazy loading)\r\nconst getSecretKey = () => {\r\n    const secret = process.env.JWT_SECRET;\r\n    if (!secret) {\r\n        // During build time, allow missing secret\r\n        if (process.env.NODE_ENV === 'production' && typeof window === 'undefined' && process.env.NEXT_PHASE !== 'phase-production-build') {\r\n            throw new Error('JWT_SECRET must be set in production environment');\r\n        }\r\n        // Fallback for development and build time\r\n        if (process.env.NODE_ENV !== 'production') {\r\n            console.warn('⚠️  JWT_SECRET not set, using default. This is unsafe for production!');\r\n        }\r\n        return 'dev-secret-key-change-in-production';\r\n    }\r\n    return secret;\r\n};\r\n\r\nconst getKey = () => {\r\n    const secretKey = getSecretKey();\r\n    return new TextEncoder().encode(secretKey);\r\n};\r\n\r\nexport async function encrypt(payload: any) {\r\n    const key = getKey();\r\n    return await new SignJWT(payload)\r\n        .setProtectedHeader({ alg: 'HS256' })\r\n        .setIssuedAt()\r\n        .setExpirationTime('24h')\r\n        .sign(key);\r\n}\r\n\r\nexport async function decrypt(input: string): Promise<any> {\r\n    const key = getKey();\r\n    const { payload } = await jwtVerify(input, key, {\r\n        algorithms: ['HS256'],\r\n    });\r\n    return payload;\r\n}\r\n\r\nexport async function getSession() {\r\n    const cookieStore = await cookies();\r\n    const session = cookieStore.get('session')?.value;\r\n    if (!session) return null;\r\n    return await decrypt(session);\r\n}\r\n\r\nexport async function updateSession(request: NextRequest) {\r\n    const session = request.cookies.get('session')?.value;\r\n    if (!session) return;\r\n\r\n    // Refresh the session so it doesn't expire\r\n    const parsed = await decrypt(session);\r\n    parsed.expires = new Date(Date.now() + 24 * 60 * 60 * 1000);\r\n    const res = NextResponse.next();\r\n    res.cookies.set({\r\n        name: 'session',\r\n        value: await encrypt(parsed),\r\n        httpOnly: true,\r\n        expires: parsed.expires,\r\n    });\r\n    return res;\r\n}\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AACA;AACA;;;;AAEA,0DAA0D;AAC1D,MAAM,eAAe;IACjB,MAAM,SAAS,QAAQ,GAAG,CAAC,UAAU;IACrC,IAAI,CAAC,QAAQ;QACT,0CAA0C;QAC1C;;QAGA,0CAA0C;QAC1C,wCAA2C;YACvC,QAAQ,IAAI,CAAC;QACjB;QACA,OAAO;IACX;IACA,OAAO;AACX;AAEA,MAAM,SAAS;IACX,MAAM,YAAY;IAClB,OAAO,IAAI,cAAc,MAAM,CAAC;AACpC;AAEO,eAAe,QAAQ,OAAY;IACtC,MAAM,MAAM;IACZ,OAAO,MAAM,IAAI,kKAAO,CAAC,SACpB,kBAAkB,CAAC;QAAE,KAAK;IAAQ,GAClC,WAAW,GACX,iBAAiB,CAAC,OAClB,IAAI,CAAC;AACd;AAEO,eAAe,QAAQ,KAAa;IACvC,MAAM,MAAM;IACZ,MAAM,EAAE,OAAO,EAAE,GAAG,MAAM,IAAA,sKAAS,EAAC,OAAO,KAAK;QAC5C,YAAY;YAAC;SAAQ;IACzB;IACA,OAAO;AACX;AAEO,eAAe;IAClB,MAAM,cAAc,MAAM,IAAA,4IAAO;IACjC,MAAM,UAAU,YAAY,GAAG,CAAC,YAAY;IAC5C,IAAI,CAAC,SAAS,OAAO;IACrB,OAAO,MAAM,QAAQ;AACzB;AAEO,eAAe,cAAc,OAAoB;IACpD,MAAM,UAAU,QAAQ,OAAO,CAAC,GAAG,CAAC,YAAY;IAChD,IAAI,CAAC,SAAS;IAEd,2CAA2C;IAC3C,MAAM,SAAS,MAAM,QAAQ;IAC7B,OAAO,OAAO,GAAG,IAAI,KAAK,KAAK,GAAG,KAAK,KAAK,KAAK,KAAK;IACtD,MAAM,MAAM,gJAAY,CAAC,IAAI;IAC7B,IAAI,OAAO,CAAC,GAAG,CAAC;QACZ,MAAM;QACN,OAAO,MAAM,QAAQ;QACrB,UAAU;QACV,SAAS,OAAO,OAAO;IAC3B;IACA,OAAO;AACX"}},
    {"offset": {"line": 151, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/api-response.ts"],"sourcesContent":["import { NextResponse } from 'next/server';\r\n\r\n/**\r\n * Standardized API response wrapper\r\n */\r\nexport class ApiResponse {\r\n    /**\r\n     * Success response\r\n     */\r\n    static success<T>(data: T, message?: string, status: number = 200) {\r\n        return NextResponse.json(\r\n            {\r\n                success: true,\r\n                message: message || 'Success',\r\n                data,\r\n            },\r\n            { status }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Error response\r\n     */\r\n    static error(\r\n        message: string,\r\n        status: number = 400,\r\n        details?: any,\r\n        code?: string\r\n    ) {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message,\r\n                    code: code || 'ERROR',\r\n                    ...(details && { details }),\r\n                },\r\n            },\r\n            { status }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Validation error response\r\n     */\r\n    static validationError(errors: Array<{ path: string; message: string }>) {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message: 'Validation failed',\r\n                    code: 'VALIDATION_ERROR',\r\n                    details: errors,\r\n                },\r\n            },\r\n            { status: 400 }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Unauthorized response\r\n     */\r\n    static unauthorized(message: string = 'Unauthorized') {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message,\r\n                    code: 'UNAUTHORIZED',\r\n                },\r\n            },\r\n            { status: 401 }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Forbidden response\r\n     */\r\n    static forbidden(message: string = 'Forbidden: Insufficient permissions') {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message,\r\n                    code: 'FORBIDDEN',\r\n                },\r\n            },\r\n            { status: 403 }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Not found response\r\n     */\r\n    static notFound(resource: string = 'Resource') {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message: `${resource} not found`,\r\n                    code: 'NOT_FOUND',\r\n                },\r\n            },\r\n            { status: 404 }\r\n        );\r\n    }\r\n\r\n    /**\r\n     * Internal server error response\r\n     */\r\n    static internalError(message: string = 'Internal server error') {\r\n        return NextResponse.json(\r\n            {\r\n                success: false,\r\n                error: {\r\n                    message,\r\n                    code: 'INTERNAL_ERROR',\r\n                },\r\n            },\r\n            { status: 500 }\r\n        );\r\n    }\r\n}\r\n\r\n/**\r\n * Pagination metadata\r\n */\r\nexport interface PaginationMeta {\r\n    page: number;\r\n    limit: number;\r\n    total: number;\r\n    totalPages: number;\r\n    hasNext: boolean;\r\n    hasPrev: boolean;\r\n}\r\n\r\n/**\r\n * Paginated response\r\n */\r\nexport function paginatedResponse<T>(\r\n    data: T[],\r\n    meta: PaginationMeta,\r\n    message?: string\r\n) {\r\n    return NextResponse.json({\r\n        success: true,\r\n        message: message || 'Success',\r\n        data,\r\n        pagination: meta,\r\n    });\r\n}\r\n\r\n/**\r\n * Parse pagination query parameters\r\n */\r\nexport function parsePagination(request: Request) {\r\n    const { searchParams } = new URL(request.url);\r\n    const page = Math.max(1, parseInt(searchParams.get('page') || '1', 10));\r\n    const limit = Math.min(100, Math.max(1, parseInt(searchParams.get('limit') || '10', 10)));\r\n    const skip = (page - 1) * limit;\r\n\r\n    return { page, limit, skip };\r\n}\r\n\r\n/**\r\n * Calculate pagination metadata\r\n */\r\nexport function calculatePaginationMeta(\r\n    total: number,\r\n    page: number,\r\n    limit: number\r\n): PaginationMeta {\r\n    const totalPages = Math.ceil(total / limit);\r\n    return {\r\n        page,\r\n        limit,\r\n        total,\r\n        totalPages,\r\n        hasNext: page < totalPages,\r\n        hasPrev: page > 1,\r\n    };\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;;AAKO,MAAM;IACT;;KAEC,GACD,OAAO,QAAW,IAAO,EAAE,OAAgB,EAAE,SAAiB,GAAG,EAAE;QAC/D,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,SAAS,WAAW;YACpB;QACJ,GACA;YAAE;QAAO;IAEjB;IAEA;;KAEC,GACD,OAAO,MACH,OAAe,EACf,SAAiB,GAAG,EACpB,OAAa,EACb,IAAa,EACf;QACE,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH;gBACA,MAAM,QAAQ;gBACd,GAAI,WAAW;oBAAE;gBAAQ,CAAC;YAC9B;QACJ,GACA;YAAE;QAAO;IAEjB;IAEA;;KAEC,GACD,OAAO,gBAAgB,MAAgD,EAAE;QACrE,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH,SAAS;gBACT,MAAM;gBACN,SAAS;YACb;QACJ,GACA;YAAE,QAAQ;QAAI;IAEtB;IAEA;;KAEC,GACD,OAAO,aAAa,UAAkB,cAAc,EAAE;QAClD,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH;gBACA,MAAM;YACV;QACJ,GACA;YAAE,QAAQ;QAAI;IAEtB;IAEA;;KAEC,GACD,OAAO,UAAU,UAAkB,qCAAqC,EAAE;QACtE,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH;gBACA,MAAM;YACV;QACJ,GACA;YAAE,QAAQ;QAAI;IAEtB;IAEA;;KAEC,GACD,OAAO,SAAS,WAAmB,UAAU,EAAE;QAC3C,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH,SAAS,GAAG,SAAS,UAAU,CAAC;gBAChC,MAAM;YACV;QACJ,GACA;YAAE,QAAQ;QAAI;IAEtB;IAEA;;KAEC,GACD,OAAO,cAAc,UAAkB,uBAAuB,EAAE;QAC5D,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO;gBACH;gBACA,MAAM;YACV;QACJ,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ;AAiBO,SAAS,kBACZ,IAAS,EACT,IAAoB,EACpB,OAAgB;IAEhB,OAAO,gJAAY,CAAC,IAAI,CAAC;QACrB,SAAS;QACT,SAAS,WAAW;QACpB;QACA,YAAY;IAChB;AACJ;AAKO,SAAS,gBAAgB,OAAgB;IAC5C,MAAM,EAAE,YAAY,EAAE,GAAG,IAAI,IAAI,QAAQ,GAAG;IAC5C,MAAM,OAAO,KAAK,GAAG,CAAC,GAAG,SAAS,aAAa,GAAG,CAAC,WAAW,KAAK;IACnE,MAAM,QAAQ,KAAK,GAAG,CAAC,KAAK,KAAK,GAAG,CAAC,GAAG,SAAS,aAAa,GAAG,CAAC,YAAY,MAAM;IACpF,MAAM,OAAO,CAAC,OAAO,CAAC,IAAI;IAE1B,OAAO;QAAE;QAAM;QAAO;IAAK;AAC/B;AAKO,SAAS,wBACZ,KAAa,EACb,IAAY,EACZ,KAAa;IAEb,MAAM,aAAa,KAAK,IAAI,CAAC,QAAQ;IACrC,OAAO;QACH;QACA;QACA;QACA;QACA,SAAS,OAAO;QAChB,SAAS,OAAO;IACpB;AACJ"}},
    {"offset": {"line": 292, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/auth-middleware.ts"],"sourcesContent":["import { getSession } from './auth';\r\nimport { NextResponse } from 'next/server';\r\nimport type { NextRequest } from 'next/server';\r\nimport { ApiResponse } from './api-response';\r\n\r\nexport interface AuthenticatedRequest extends NextRequest {\r\n    user?: {\r\n        id: string;\r\n        email: string;\r\n        role: string;\r\n    };\r\n}\r\n\r\n/**\r\n * Require authentication for API routes\r\n * Returns the session user or null if unauthorized\r\n */\r\nexport async function requireAuth(request: NextRequest) {\r\n    const session = await getSession();\r\n    \r\n    if (!session) {\r\n        return {\r\n            error: ApiResponse.unauthorized(),\r\n            user: null,\r\n        };\r\n    }\r\n\r\n    return {\r\n        error: null,\r\n        user: session as { id: string; email: string; role: string },\r\n    };\r\n}\r\n\r\n/**\r\n * Require specific role(s) for API routes\r\n * @param allowedRoles - Array of allowed roles (e.g., ['ADMIN', 'MANAGER'])\r\n */\r\nexport async function requireRole(\r\n    request: NextRequest,\r\n    allowedRoles: string[]\r\n) {\r\n    const authResult = await requireAuth(request);\r\n    \r\n    if (authResult.error) {\r\n        return authResult;\r\n    }\r\n\r\n    const user = authResult.user!;\r\n    \r\n    if (!allowedRoles.includes(user.role)) {\r\n        return {\r\n            error: ApiResponse.forbidden(),\r\n            user: null,\r\n        };\r\n    }\r\n\r\n    return authResult;\r\n}\r\n\r\n/**\r\n * Role hierarchy check\r\n * Higher roles have more permissions\r\n */\r\nexport const ROLE_HIERARCHY: Record<string, number> = {\r\n    ADMIN: 4,\r\n    MANAGER: 3,\r\n    STAFF: 2,\r\n    TENANT: 1,\r\n};\r\n\r\nexport function hasRolePermission(userRole: string, requiredRole: string): boolean {\r\n    const userLevel = ROLE_HIERARCHY[userRole] || 0;\r\n    const requiredLevel = ROLE_HIERARCHY[requiredRole] || 0;\r\n    return userLevel >= requiredLevel;\r\n}\r\n\r\n"],"names":[],"mappings":";;;;;;;;;;AAAA;AAGA;;;AAcO,eAAe,YAAY,OAAoB;IAClD,MAAM,UAAU,MAAM,IAAA,2HAAU;IAEhC,IAAI,CAAC,SAAS;QACV,OAAO;YACH,OAAO,uIAAW,CAAC,YAAY;YAC/B,MAAM;QACV;IACJ;IAEA,OAAO;QACH,OAAO;QACP,MAAM;IACV;AACJ;AAMO,eAAe,YAClB,OAAoB,EACpB,YAAsB;IAEtB,MAAM,aAAa,MAAM,YAAY;IAErC,IAAI,WAAW,KAAK,EAAE;QAClB,OAAO;IACX;IAEA,MAAM,OAAO,WAAW,IAAI;IAE5B,IAAI,CAAC,aAAa,QAAQ,CAAC,KAAK,IAAI,GAAG;QACnC,OAAO;YACH,OAAO,uIAAW,CAAC,SAAS;YAC5B,MAAM;QACV;IACJ;IAEA,OAAO;AACX;AAMO,MAAM,iBAAyC;IAClD,OAAO;IACP,SAAS;IACT,OAAO;IACP,QAAQ;AACZ;AAEO,SAAS,kBAAkB,QAAgB,EAAE,YAAoB;IACpE,MAAM,YAAY,cAAc,CAAC,SAAS,IAAI;IAC9C,MAAM,gBAAgB,cAAc,CAAC,aAAa,IAAI;IACtD,OAAO,aAAa;AACxB"}},
    {"offset": {"line": 348, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/schemas.ts"],"sourcesContent":["import { z } from 'zod';\r\n\r\n// Password strength validation\r\nconst passwordSchema = z\r\n    .string()\r\n    .min(8, 'Password must be at least 8 characters')\r\n    .regex(/[a-z]/, 'Password must contain at least one lowercase letter')\r\n    .regex(/[A-Z]/, 'Password must contain at least one uppercase letter')\r\n    .regex(/[0-9]/, 'Password must contain at least one number')\r\n    .regex(/[^a-zA-Z0-9]/, 'Password must contain at least one special character');\r\n\r\n// Auth validations\r\nexport const loginSchema = z.object({\r\n    email: z.string().email('Invalid email format'),\r\n    password: z.string().min(1, 'Password is required'),\r\n});\r\n\r\nexport const registerSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    email: z.string().email('Invalid email format'),\r\n    password: passwordSchema,\r\n    role: z.enum(['ADMIN', 'MANAGER', 'STAFF', 'TENANT'], {\r\n        message: 'Invalid role',\r\n    }),\r\n});\r\n\r\n// Building validations\r\nexport const buildingSchema = z.object({\r\n    name: z.string().min(1, 'Building name is required'),\r\n    address: z.string().min(1, 'Address is required'),\r\n});\r\n\r\n// Flat validations\r\nexport const flatSchema = z.object({\r\n    number: z.string().min(1, 'Flat number is required'),\r\n    buildingId: z.string().uuid('Invalid building ID'),\r\n    rentAmount: z.number().positive('Rent amount must be positive'),\r\n    isOccupied: z.boolean().optional().default(false),\r\n});\r\n\r\n// Tenant validations\r\nexport const tenantCreateSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    email: z.string().email('Invalid email format'),\r\n    password: passwordSchema,\r\n    phone: z.string()\r\n        .min(1, 'Mobile number is required')\r\n        .refine((val) => {\r\n            // Remove all non-digit characters to count actual digits\r\n            const digitsOnly = val.replace(/\\D/g, '');\r\n            return digitsOnly.length >= 10 && digitsOnly.length <= 15;\r\n        }, 'Mobile number must contain 10-15 digits')\r\n        .refine((val) => {\r\n            // Allow digits, spaces, +, -, (, ), and common separators\r\n            return /^[\\d\\s\\+\\-\\(\\)\\.]{10,20}$/.test(val);\r\n        }, 'Invalid mobile number format. Use format like: +1234567890, 01234567890, or (123) 456-7890'),\r\n    flatId: z.string()\r\n        .uuid('Invalid flat ID')\r\n        .optional()\r\n        .nullable()\r\n        .or(z.literal(''))\r\n        .transform((val) => (val === '' ? null : val)),\r\n    moveInDate: z.union([\r\n        z.string().datetime('Invalid date format'),\r\n        z.string().regex(/^\\d{4}-\\d{2}-\\d{2}$/, 'Date must be in YYYY-MM-DD format'),\r\n        z.string().date('Invalid date format'),\r\n    ]),\r\n    securityDeposit: z.union([\r\n        z.number().nonnegative('Security deposit must be non-negative'),\r\n        z.string().transform((val) => (val === '' ? 0 : parseFloat(val))),\r\n    ]).optional().default(0),\r\n    photo: z.string().optional().nullable(),\r\n    identityDocument: z.string().optional().nullable(),\r\n    identityType: z.enum(['NID', 'Passport', 'Driving License', 'Other'])\r\n        .optional()\r\n        .nullable()\r\n        .or(z.literal(''))\r\n        .transform((val) => (val === '' ? null : val)),\r\n});\r\n\r\n// Payment validations\r\nexport const paymentSchema = z.object({\r\n    tenantId: z.string().uuid('Invalid tenant ID'),\r\n    amount: z.number().positive('Amount must be positive'),\r\n    type: z.enum(['RENT', 'UTILITY', 'DEPOSIT'], {\r\n        message: 'Invalid payment type',\r\n    }),\r\n    method: z.enum(['CASH', 'BANK', 'BKASH', 'NAGAD'], {\r\n        message: 'Invalid payment method',\r\n    }),\r\n    month: z.string().regex(/^\\d{4}-\\d{2}$/, 'Month must be in YYYY-MM format').optional().nullable(),\r\n    status: z.enum(['PAID', 'PARTIAL', 'PENDING']).optional().default('PAID'),\r\n});\r\n\r\n// Service Request validations\r\nexport const serviceRequestSchema = z.object({\r\n    tenantId: z.string().uuid('Invalid tenant ID'),\r\n    category: z.enum(['PLUMBING', 'ELECTRICAL', 'CLEANING', 'OTHER'], {\r\n        message: 'Invalid category',\r\n    }),\r\n    description: z.string().min(10, 'Description must be at least 10 characters'),\r\n    assignedToId: z.string().uuid('Invalid user ID').optional().nullable(),\r\n    cost: z.number().nonnegative('Cost must be non-negative').optional().nullable(),\r\n    status: z.enum(['PENDING', 'IN_PROGRESS', 'COMPLETED']).optional().default('PENDING'),\r\n});\r\n\r\n// Family Member validations\r\nexport const familyMemberSchema = z.object({\r\n    name: z.string().min(2, 'Name must be at least 2 characters'),\r\n    relationship: z.string().min(1, 'Relationship is required'),\r\n    age: z.number().int().positive('Age must be a positive integer').optional().nullable(),\r\n    phone: z.string().optional().nullable(),\r\n});\r\n\r\n// Utility Bill validations\r\nexport const utilityBillSchema = z.object({\r\n    tenantId: z.string().uuid('Invalid tenant ID'),\r\n    type: z.enum(['ELECTRICITY', 'WATER', 'GAS', 'INTERNET', 'SERVICE'], {\r\n        message: 'Invalid utility type',\r\n    }),\r\n    amount: z.number().positive('Amount must be positive'),\r\n    month: z.string().regex(/^\\d{4}-\\d{2}$/, 'Month must be in YYYY-MM format'),\r\n    isPaid: z.boolean().optional().default(false),\r\n});\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 499, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/validations.ts"],"sourcesContent":["import { z } from 'zod';\r\nimport { NextResponse } from 'next/server';\r\nimport {\r\n    loginSchema,\r\n    registerSchema,\r\n    buildingSchema,\r\n    flatSchema,\r\n    tenantCreateSchema,\r\n    paymentSchema,\r\n    serviceRequestSchema,\r\n    familyMemberSchema,\r\n    utilityBillSchema\r\n} from './schemas';\r\n\r\nexport {\r\n    loginSchema,\r\n    registerSchema,\r\n    buildingSchema,\r\n    flatSchema,\r\n    tenantCreateSchema,\r\n    paymentSchema,\r\n    serviceRequestSchema,\r\n    familyMemberSchema,\r\n    utilityBillSchema\r\n};\r\n\r\n/**\r\n * Helper function to validate request body\r\n */\r\nexport async function validateRequest<T>(\r\n    request: Request,\r\n    schema: z.ZodSchema<T>\r\n): Promise<{ success: true; data: T } | { success: false; error: NextResponse }> {\r\n    try {\r\n        const body = await request.json();\r\n        const data = schema.parse(body);\r\n        return { success: true, data };\r\n    } catch (error: any) {\r\n        if (error instanceof z.ZodError) {\r\n            const { ApiResponse } = await import('./api-response');\r\n            // ZodError uses 'issues' not 'errors'\r\n            const errors = (error.issues || []).map((e: any) => ({\r\n                path: (e.path || []).join('.'),\r\n                message: e.message || 'Validation error',\r\n            }));\r\n            return {\r\n                success: false,\r\n                error: ApiResponse.validationError(errors),\r\n            };\r\n        }\r\n        const { ApiResponse } = await import('./api-response');\r\n        return {\r\n            success: false,\r\n            error: ApiResponse.error('Invalid request body', 400),\r\n        };\r\n    }\r\n}\r\n"],"names":[],"mappings":";;;;AAAA;AAEA;;;;AA2BO,eAAe,gBAClB,OAAgB,EAChB,MAAsB;IAEtB,IAAI;QACA,MAAM,OAAO,MAAM,QAAQ,IAAI;QAC/B,MAAM,OAAO,OAAO,KAAK,CAAC;QAC1B,OAAO;YAAE,SAAS;YAAM;QAAK;IACjC,EAAE,OAAO,OAAY;QACjB,IAAI,iBAAiB,oLAAC,CAAC,QAAQ,EAAE;YAC7B,MAAM,EAAE,WAAW,EAAE,GAAG;YACxB,sCAAsC;YACtC,MAAM,SAAS,CAAC,MAAM,MAAM,IAAI,EAAE,EAAE,GAAG,CAAC,CAAC,IAAW,CAAC;oBACjD,MAAM,CAAC,EAAE,IAAI,IAAI,EAAE,EAAE,IAAI,CAAC;oBAC1B,SAAS,EAAE,OAAO,IAAI;gBAC1B,CAAC;YACD,OAAO;gBACH,SAAS;gBACT,OAAO,YAAY,eAAe,CAAC;YACvC;QACJ;QACA,MAAM,EAAE,WAAW,EAAE,GAAG;QACxB,OAAO;YACH,SAAS;YACT,OAAO,YAAY,KAAK,CAAC,wBAAwB;QACrD;IACJ;AACJ"}},
    {"offset": {"line": 540, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/lib/logger.ts"],"sourcesContent":["/**\r\n * Simple logger utility for consistent error logging\r\n */\r\n\r\ntype LogLevel = 'info' | 'warn' | 'error' | 'debug';\r\n\r\ninterface LogEntry {\r\n    level: LogLevel;\r\n    message: string;\r\n    timestamp: string;\r\n    context?: Record<string, any>;\r\n    error?: Error;\r\n}\r\n\r\nclass Logger {\r\n    private formatMessage(entry: LogEntry): string {\r\n        const { level, message, timestamp, context, error } = entry;\r\n        let logMessage = `[${timestamp}] [${level.toUpperCase()}] ${message}`;\r\n\r\n        if (context && Object.keys(context).length > 0) {\r\n            logMessage += ` | Context: ${JSON.stringify(context)}`;\r\n        }\r\n\r\n        if (error) {\r\n            logMessage += ` | Error: ${error.message}`;\r\n            if (error.stack) {\r\n                logMessage += ` | Stack: ${error.stack}`;\r\n            }\r\n        }\r\n\r\n        return logMessage;\r\n    }\r\n\r\n    private log(level: LogLevel, message: string, context?: Record<string, any>, error?: Error) {\r\n        const entry: LogEntry = {\r\n            level,\r\n            message,\r\n            timestamp: new Date().toISOString(),\r\n            context,\r\n            error,\r\n        };\r\n\r\n        const formattedMessage = this.formatMessage(entry);\r\n\r\n        switch (level) {\r\n            case 'error':\r\n                console.error(formattedMessage);\r\n                // In production, you might want to send to error tracking service\r\n                break;\r\n            case 'warn':\r\n                console.warn(formattedMessage);\r\n                break;\r\n            case 'debug':\r\n                if (process.env.NODE_ENV === 'development') {\r\n                    console.debug(formattedMessage);\r\n                }\r\n                break;\r\n            default:\r\n                console.log(formattedMessage);\r\n        }\r\n    }\r\n\r\n    info(message: string, context?: Record<string, any>) {\r\n        this.log('info', message, context);\r\n    }\r\n\r\n    warn(message: string, context?: Record<string, any>) {\r\n        this.log('warn', message, context);\r\n    }\r\n\r\n    error(message: string, error?: Error, context?: Record<string, any>) {\r\n        this.log('error', message, context, error);\r\n    }\r\n\r\n    debug(message: string, context?: Record<string, any>) {\r\n        this.log('debug', message, context);\r\n    }\r\n}\r\n\r\nexport const logger = new Logger();\r\n\r\n"],"names":[],"mappings":"AAAA;;CAEC;;;;AAYD,MAAM;IACM,cAAc,KAAe,EAAU;QAC3C,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,OAAO,EAAE,KAAK,EAAE,GAAG;QACtD,IAAI,aAAa,CAAC,CAAC,EAAE,UAAU,GAAG,EAAE,MAAM,WAAW,GAAG,EAAE,EAAE,SAAS;QAErE,IAAI,WAAW,OAAO,IAAI,CAAC,SAAS,MAAM,GAAG,GAAG;YAC5C,cAAc,CAAC,YAAY,EAAE,KAAK,SAAS,CAAC,UAAU;QAC1D;QAEA,IAAI,OAAO;YACP,cAAc,CAAC,UAAU,EAAE,MAAM,OAAO,EAAE;YAC1C,IAAI,MAAM,KAAK,EAAE;gBACb,cAAc,CAAC,UAAU,EAAE,MAAM,KAAK,EAAE;YAC5C;QACJ;QAEA,OAAO;IACX;IAEQ,IAAI,KAAe,EAAE,OAAe,EAAE,OAA6B,EAAE,KAAa,EAAE;QACxF,MAAM,QAAkB;YACpB;YACA;YACA,WAAW,IAAI,OAAO,WAAW;YACjC;YACA;QACJ;QAEA,MAAM,mBAAmB,IAAI,CAAC,aAAa,CAAC;QAE5C,OAAQ;YACJ,KAAK;gBACD,QAAQ,KAAK,CAAC;gBAEd;YACJ,KAAK;gBACD,QAAQ,IAAI,CAAC;gBACb;YACJ,KAAK;gBACD,wCAA4C;oBACxC,QAAQ,KAAK,CAAC;gBAClB;gBACA;YACJ;gBACI,QAAQ,GAAG,CAAC;QACpB;IACJ;IAEA,KAAK,OAAe,EAAE,OAA6B,EAAE;QACjD,IAAI,CAAC,GAAG,CAAC,QAAQ,SAAS;IAC9B;IAEA,KAAK,OAAe,EAAE,OAA6B,EAAE;QACjD,IAAI,CAAC,GAAG,CAAC,QAAQ,SAAS;IAC9B;IAEA,MAAM,OAAe,EAAE,KAAa,EAAE,OAA6B,EAAE;QACjE,IAAI,CAAC,GAAG,CAAC,SAAS,SAAS,SAAS;IACxC;IAEA,MAAM,OAAe,EAAE,OAA6B,EAAE;QAClD,IAAI,CAAC,GAAG,CAAC,SAAS,SAAS;IAC/B;AACJ;AAEO,MAAM,SAAS,IAAI"}},
    {"offset": {"line": 604, "column": 0}, "map": {"version":3,"sources":["file:///E:/Projects/rentManagement/app/api/tenants/route.ts"],"sourcesContent":["import { prisma } from '@/lib/db';\r\nimport bcrypt from 'bcryptjs';\r\nimport { requireAuth, requireRole } from '@/lib/auth-middleware';\r\nimport { tenantCreateSchema, validateRequest } from '@/lib/validations';\r\nimport { ApiResponse, parsePagination, paginatedResponse, calculatePaginationMeta } from '@/lib/api-response';\r\nimport { logger } from '@/lib/logger';\r\nimport type { NextRequest } from 'next/server';\r\n\r\nexport async function GET(request: NextRequest) {\r\n    try {\r\n        // Require authentication\r\n        const authResult = await requireAuth(request);\r\n        if (authResult.error) {\r\n            return authResult.error;\r\n        }\r\n\r\n        const { page, limit, skip } = parsePagination(request);\r\n\r\n        const [tenants, total] = await Promise.all([\r\n            prisma.tenant.findMany({\r\n                include: {\r\n                    user: true,\r\n                    flat: {\r\n                        include: {\r\n                            building: true,\r\n                        },\r\n                    },\r\n                },\r\n                orderBy: {\r\n                    createdAt: 'desc',\r\n                },\r\n                skip,\r\n                take: limit,\r\n            }),\r\n            prisma.tenant.count(),\r\n        ]);\r\n\r\n        const meta = calculatePaginationMeta(total, page, limit);\r\n        return paginatedResponse(tenants, meta);\r\n    } catch (error: any) {\r\n        logger.error('Failed to fetch tenants', error, { endpoint: '/api/tenants' });\r\n        return ApiResponse.internalError('Failed to fetch tenants');\r\n    }\r\n}\r\n\r\nexport async function POST(request: NextRequest) {\r\n    try {\r\n        // Require authentication and ADMIN/MANAGER/STAFF role\r\n        const authResult = await requireRole(request, ['ADMIN', 'MANAGER', 'STAFF']);\r\n        if (authResult.error) {\r\n            return authResult.error;\r\n        }\r\n\r\n        // Validate request body\r\n        const validation = await validateRequest(request, tenantCreateSchema);\r\n        if (!validation.success) {\r\n            return validation.error;\r\n        }\r\n\r\n        const { name, email, password, phone, flatId, moveInDate, securityDeposit, photo, identityDocument, identityType } = validation.data;\r\n\r\n        // Use transaction for atomicity\r\n        const result = await prisma.$transaction(async (tx) => {\r\n            // 1. Check if user exists\r\n            const existingUser = await tx.user.findUnique({ where: { email } });\r\n            if (existingUser) {\r\n                throw new Error('User with this email already exists');\r\n            }\r\n\r\n            // 2. Check if flat is already occupied\r\n            if (flatId) {\r\n                const flat = await tx.flat.findUnique({ where: { id: flatId } });\r\n                if (!flat) {\r\n                    throw new Error('Flat not found');\r\n                }\r\n                if (flat.isOccupied) {\r\n                    throw new Error('Flat is already occupied');\r\n                }\r\n            }\r\n\r\n            // 3. Create User\r\n            const hashedPassword = await bcrypt.hash(password, 10);\r\n            const user = await tx.user.create({\r\n                data: {\r\n                    name,\r\n                    email,\r\n                    password: hashedPassword,\r\n                    phone: phone || null,\r\n                    role: 'TENANT',\r\n                },\r\n            });\r\n\r\n            // 4. Create Tenant\r\n            const tenant = await tx.tenant.create({\r\n                data: {\r\n                    userId: user.id,\r\n                    flatId: flatId || null,\r\n                    moveInDate: new Date(moveInDate),\r\n                    securityDeposit: securityDeposit || 0,\r\n                    photo: photo || null,\r\n                    identityDocument: identityDocument || null,\r\n                    identityType: identityType || null,\r\n                },\r\n            });\r\n\r\n            // 5. Update Flat status if assigned\r\n            if (flatId) {\r\n                await tx.flat.update({\r\n                    where: { id: flatId },\r\n                    data: { isOccupied: true },\r\n                });\r\n            }\r\n\r\n            return tenant;\r\n        });\r\n\r\n        logger.info('Tenant created', { tenantId: result.id, userId: result.userId });\r\n        return ApiResponse.success(result, 'Tenant created successfully', 201);\r\n    } catch (error: any) {\r\n        logger.error('Tenant creation error', error, { endpoint: '/api/tenants' });\r\n        \r\n        // Handle known errors\r\n        if (error.message === 'User with this email already exists' || \r\n            error.message === 'Flat not found' || \r\n            error.message === 'Flat is already occupied') {\r\n            return ApiResponse.error(error.message, 400);\r\n        }\r\n        \r\n        // Handle Prisma errors\r\n        if (error.code === 'P2002') {\r\n            return ApiResponse.error('A record with this information already exists', 400);\r\n        }\r\n        \r\n        // Return the actual error message if available, otherwise generic message\r\n        const errorMessage = error.message || 'Failed to create tenant';\r\n        return ApiResponse.error(errorMessage, 500);\r\n    }\r\n}\r\n"],"names":[],"mappings":"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"}}]
}